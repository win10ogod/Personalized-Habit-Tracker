<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personalized Habit Tracker</title>
    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="style.css">
    <!-- Chart.js Library (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <!-- Header Section -->
    <header>
        <h1>Personalized Habit Tracker</h1>
    </header>

    <!-- Main Content Area -->
    <main>
        <!-- Section for Adding and Managing Habits -->
        <section id="habit-form-section">
            <h2>Add New Habit</h2>
            <form id="habit-form">
                <div>
                    <label for="habit-name">Habit Name:</label>
                    <input type="text" id="habit-name" name="habit-name" required>
                </div>
                <div>
                    <label for="habit-frequency">Frequency:</label>
                    <select id="habit-frequency" name="habit-frequency">
                        <option value="daily">Daily</option>
                        <option value="weekly">Weekly</option>
                    </select>
                </div>
                <div>
                    <label for="habit-target-value">Target Value:</label>
                    <input type="number" id="habit-target-value" value="1" min="1">
                </div>
                <div>
                    <label for="habit-target-unit">Target Unit:</label>
                    <select id="habit-target-unit"></select>
                </div>
                <div>
                    <label for="habit-reminder-time">Reminder Time:</label>
                    <input type="time" id="habit-reminder-time" name="habit-reminder-time" value="09:00">
                </div>
                <div>
                    <label for="habit-reminder-recurring">Recurring Reminder:</label>
                    <select id="habit-reminder-recurring" name="habit-reminder-recurring">
                        <option value="false" selected>No</option>
                        <option value="true">Yes</option>
                    </select>
                </div>
                <div>
                    <label for="habit-reminder-sound">Reminder Sound:</label>
                    <select id="habit-reminder-sound" name="habit-reminder-sound">
                        <option value="default">Default Sound</option>
                        <option value="bell.mp3">Bell</option>
                        <option value="chime.mp3">Chime</option>
                    </select>
                </div>
                <input type="submit" value="Add Habit" class="btn btn-primary">
            </form>
            <button id="request-permission-btn" class="btn btn-secondary">Enable Reminders</button>
        </section>
        
        <!-- Section for Displaying List of Habits -->
        <section id="habits-list-section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h2 style="margin-bottom: 0;">My Habits</h2> 
                <button id="toggle-archived-view-btn" class="btn btn-outline-secondary"></button>
            </div>
            <ul id="habits-list">
                <!-- Habit items will be populated here by JavaScript -->
                <!-- Example: 
                <li class="habit-item" data-habit-id="123">
                    <span>Exercise (Daily)</span>
                    <button class="complete-btn">Mark Complete</button>
                </li> 
                -->
            </ul>
        </section>
        
        <!-- Section for Calendar View -->
        <section id="calendar-section">
            <h2>Calendar View</h2>
            <div class="calendar-navigation" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <button id="prev-month-btn" class="btn btn-secondary">Previous Month</button>
                <h3 id="month-year-display" style="margin-bottom: 0;">Month Year</h3> <!-- Populated by JS -->
                <button id="next-month-btn" class="btn btn-secondary">Next Month</button>
            </div>
            <div id="calendar-container">
                <!-- Calendar days will be populated here by JavaScript -->
            </div>
        </section>
        
        <!-- Section for Habit Progress Bars -->
        <section id="progress-section">
            <h2>Habit Progress</h2>
            <div id="progress-bars-container">
                <!-- Progress bars will be populated here by JavaScript -->
            </div>
        </section>
        
        <!-- Section for Habit Analysis Charts -->
        <section id="charts-section">
            <div id="charts-container">
                <h2>Habit Analysis</h2>
                <div id="streak-chart-wrapper">
                    <h3>Completion Streaks (Longest)</h3>
                    <canvas id="streak-chart"></canvas>
                    <p class="no-chart-data-message" style="display: none;">No streak data available.</p>
                </div>
                <div id="completion-rate-chart-wrapper">
                    <h3>Overall Completion Rates</h3>
                    <canvas id="completion-rate-chart"></canvas>
                    <p class="no-chart-data-message" style="display: none;">No completion rate data available.</p>
                </div>
                <p id="charts-global-error-message" style="display: none;">Charts cannot be displayed or no habits added.</p>
            </div>
        </section>
    </main>

    <!-- Footer Section -->
    <footer>
        <p>&copy; 2023 Personalized Habit Tracker</p>
        <div style="margin-top: 20px;">
            <button id="clear-all-data-btn" class="btn btn-danger">Clear All Records</button>
        </div>
    </footer>

    <!-- Main JavaScript File -->
    <script defer src="script.js"></script>
</body>
</html>
